<%= tag.pc_patch_canvas id: dom_id(patch),
                        class: "pc-patch-canvas has-background-grey" do %>

  <% cache patch.boxes do %>
    <%= tag.pc_boxes id: "boxes",
                     data: { controller: "box" } do %>
      <%= component_with_collection "box", cache: patch.boxes,
                                           collection: patch.boxes %>
    <% end %>
  <% end %>

  <% cache patch.lines do %>
    <%= tag.pc_lines id: "lines_container",
                     class: "pc-line-container" do %>
      <svg
        id="lines_svg"
        width="100%"
        height="100%"
        class="pc-line-svg" 
      >
          <%= component_with_collection :line, cache: patch.lines,
                                               collection: patch.lines %>
      </svg>
    <% end %>
  <% end %>

<% end %>
